import requests
import base64

# Define your credentials and URLs
client_id = '087ee2a1ce2143beb03714c5f3f09645'
client_secret = '926a8ffa938242ab8e2493524e6ae440'
token_url = 'https://api.pge.com/datacustodian/test/oauth/v2/token'

# Encode the credentials
credentials = f"{client_id}:{client_secret}"
encoded_credentials = base64.b64encode(credentials.encode('utf-8')).decode('utf-8')

# Set up headers and data for the request
headers = {
    'Authorization': f'Basic {encoded_credentials}',
    'Content-Type': 'application/x-www-form-urlencoded'
}
data = {
    'grant_type': 'client_credentials'
}

# Define certificate paths
cert = ('/Users/gunnarhostetler/Documents/Projects/PGE-API/gunzino.me-ssl-bundle/domain.cert.pem',
        '/Users/gunnarhostetler/Documents/Projects/PGE-API/gunzino.me-ssl-bundle/private.key.pem')

# Make the request
response = requests.post(token_url, headers=headers, data=data, cert=cert)

# Check the response
if response.status_code == 200:
    print("Access token obtained successfully.")
    print(response.json())  # Assuming the response is in JSON format
else:
    print(f"Failed to obtain access token. Status code: {response.status_code}")
    print(response.text)
